<!doctype html>
<html ng-app="restaurant">
<head>
	<!-- Latest compiled and minified CSS -->
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css">

	<!-- Optional theme -->
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap-theme.min.css">

	<script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?libraries=places"></script>

	<link rel="stylesheet" href="../static/css/main.css">
	<!-- Latest compiled and minified JavaScript -->
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
</head>

<body>
  <header class="navbar" role="banner">
		<div class="container col-md-12 align_center">
	  	<div class="row">
				<div class="col-md-12 align_center">
		  		<h1 class="text-center">Local Favorites</h1>
				</div>
	  	</div>
		</div>
  </header>
  <div class="container col-md-12 align_center">
	<nav class="navbar navbar-default">
	  <div class="container-fluid">
			<div class="navbar-header">
		  	<button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
					<span class="sr-only">Toggle Navigation</span>
					<span class="icon-bar"></span>
					<span class="icon-bar"></span>
					<span class="icon-bar"></span>
		  	</button>
		  <a class="navbar-brand" href="{{url_for('restaurantsPage')}}">Home</a>
		  </div>
		  <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
		  	<form class="navbar-form navbar-left" role="search" method="POST" action="">
		  		<div class="form-group">
		  			<input type="text" name="search" class="form-control" placeholder="Search">
		  		</div>
		  	<button type="submit" class="btn btn-default">Submit</button>
		  	</form>
		  </div>
		</div>
	</nav>
</div>

<div class ="container">
	<div class="heading col-md-12">
		<h2>Welcome to our favorite local restaurants!</h2>
	</div>
	<div class="body col-md-12">
		{% for restaurant in restaurant_list %}
		<div class="row align_center">
			<div class="restaurantPanel col-md-12 col-xs-12 align_center" ng-controller="PanelController as panel">
				<div class="row align_center">
					<div class="heading col-md-12 col-xs-12 align_center">
						<h3><a href="{{url_for('restaurantMenu', restaurant_id=restaurant.id)}}">{{restaurant.name}}</a></h3><p><em>
						{% for tag in tag_list[restaurant.id] %}
							{{tag.tag_name}},
						{% endfor %}</em></p>
					</div>
				</div>
				<div class="options row align_center">
					<div class="col-md-12 col-xs-12 align_center">
						<p>{{restaurant.description}}</p>
						<p>The best dish as voted is {{top_menu_items[restaurant.name]}}
					</div>
					<div class="col-md-12 col-xs-12 align_center"
							ng-controller="customersCtrl as cus">
						<ul class="nav nav-tabs panel-nav">
	        				<li ng-class="{active:panel.isSelected(1)}"><a href ng-click="panel.selectTab(1); cus.getReviews('{{restaurant.id}}')">Reviews</a></li>
	        				<li ng-class="{active:panel.isSelected(2)}"><a href ng-click="panel.selectTab(2); map.initialize('{{restaurant.address}}', '{{restaurant.id}}')">Map</a></li>

    					</ul>
						<div class="details row align_center">

			    			<div ng-show="panel.isSelected(1)">
			    			{% raw %}
			        			<div id="show-reviews">
							    <h4>Reviews</h4>
							    <ul>
							    <li ng-repeat="x in cus.names">
							        <p><b>{{x.reviewer_name}}</b>

							        <!--br><em>{{exrev.review}}</em-->
							        </p>
							    </li>
							    </ul>
							    </div>
							{% endraw %}
							</div>
								<button class="btn btn-default" type="submit" ng-click="panel.showReviewToggle()">Add a Review</button>

			    				<div id="add-review" ng-show="panel.showReviewOn()">
			    					<form name="reviewForm" method='post' ng-submit="rev.addReview('{{restaurant.id}}')" novalidate>
				    					<h4>Submit a reivew: </h4>

				    					<fieldset class="form-group">
				    						<select ng-model="rev.review.stars" ng-options="stars for stars in [5,4,3,2,1]" title="Stars" name="Stars" required>
				    							<option value="">Rate the Restaurant</option>
				    						</select>
				    					</fieldset>

				    					<fieldset class="form-group">
					    					<textarea ng-model="rev.review.body" placeholder="Write a short review of the restaurant..." title="Body" name="Body" required></textarea>
	                					</fieldset>

	                					<fieldset class="form-group">
							                <input ng-model="rev.review.author" placeholder="jimmyDean@example.org" title="Author" name="Author" required />
						                </fieldset>

						                <fieldset class="form-group">
						                <input type="submit" class="btn btn-primary pull-right" value="Submit Review" ng-click="panel.showReviewToggle()">
						                </fieldset>
					            	</form>

					            </div>
					        </div>
		    				<div ng-show="panel.isSelected(2)">
		        				<div class="subdetails" id="{{restaurant.id}}"></div>
		    				</div>
						</div>
					</div>
				</div>
			</div>
		</div>
		{% endfor %}
	</div>
</div>
<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.3.14/angular.min.js"></script>
<script src="../static/js/app.js"></script>
</body>
</html>


