<!doctype html>
<html ng-app="restaurants">
<head>
	<!-- Latest compiled and minified CSS -->
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css">

	<!-- Optional theme -->
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap-theme.min.css">

	<script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?libraries=places"></script>

	<link rel="stylesheet" href="../static/css/main.css">

</head>

<body>
  <header class="navbar" role="banner">
		<div class="container col-md-12 align_center">
	  	<div class="row">
				<div class="col-md-12 align_center">
		  		<h1 class="text-center">Local Favorites</h1>
				</div>
	  	</div>
		</div>
  </header>
  <div class="container-fluid col-md-12 align_center">
	<nav class="navbar navbar-default">
	  <div class="container-fluid">
			<div class="navbar-header">
		  	<button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
					<span class="sr-only">Toggle Navigation</span>
					<span class="icon-bar"></span>
					<span class="icon-bar"></span>
					<span class="icon-bar"></span>
		  	</button>
		  <a class="navbar-brand" href="{{url_for('restaurantsPage')}}">Home</a>
		  <a class="navbar-brand" href="{{url_for('restaurantsNew')}}">New Restaurant</a>
		  {% if user_info is not none %}
			  Welcome, {{user_info.name}}
		  {% else %}
			  <a class="navbar-brand" href="{{url_for('showLogin')}}">Log In</a>
		  {% endif %}	
		  </div>
		  <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
		  	<form class="navbar-form navbar-left" role="search" method="POST" action="">
		  		<div class="form-group">
		  			<input type="text" name="search" class="form-control" placeholder="Search">
		  		</div>
		  	<button type="submit" class="btn btn-default">Submit</button>
		  	</form>
		  </div>
		</div>
	</nav>
</div>

<div class ="container">
	<div class="heading col-md-12">
		<h2>Welcome to our favorite local restaurants!</h2>
	</div>
	<div class="body col-md-12">
		{% for restaurant in restaurant_list %}
		<div class="row align_center">
			<div class="restaurantPanel col-md-12 col-xs-12 align_center">
				<div class="row align_center">
					<div class="heading col-md-12">
					<div class="row">
						<div class="col-md-12 col-xs-12 align_center">
						<h3><a href="{{url_for('restaurantMenu', restaurant_id=restaurant.id)}}">{{restaurant.name}}</a></h3>
						</div>
					</div>
					<div class="row">
						<div class="col-md-10 col-xs-6">
						<p><em>
						{% for tag in tag_list[restaurant.id] %}
							{{tag.tag_name}},
						{% endfor %}</em></p>
						</div>
						<div class="col-md-2 col-xs-6">
						<p align="right"><em><a href="{{url_for('restaurantsEdit',restaurant_id=restaurant.id)}}">Edit</a>
						&nbsp<a href="{{url_for('restaurantsDelete',restaurant_id=restaurant.id)}}">Delete</a></em></p>
						</div>
					</div>
					</div>
				</div>
				<div class="options row align_center" ng-controller="PanelController">

					<div class="col-md-12 col-xs-12 align_center">
						<ul class="nav nav-tabs panel-nav">
	        				<li ng-class="{active:isSelected(1)}"><a href ng-click="selectTab(1);">Description</a></li>
	        				<li ng-class="{active:isSelected(2)}"><a href ng-click="selectTab(2); getReviews('{{restaurant.id}}')">Reviews</a></li>
	        				<li ng-class="{active:isSelected(3)}"><a href ng-click="selectTab(3); getMap('{{restaurant.address}}', '{{restaurant.id}}')">Map</a></li>

    					</ul>
						<div class="details row align_center">
							<div ng-show="isSelected(1)">
								<p>{{restaurant.description}}</p>
								<p>The best dish as voted is {{top_menu_items[restaurant.name]}}
							</div>

			    			<div ng-show="isSelected(2)">
			    			{% raw %}
			        			<div id="show-reviews">
							    <ul class="list-group">
							    <li ng-repeat="x in reviews" class="list-group-item">
							    	<h4 class="list-group-item-heading">{{x.reviewer_name}}</h4>
							    	<p class="list-group-item-text">
							    	{{x.stars}} Stars
							    	<br><em>{{x.review}}</em>
							    	</p>
							    </li>
							    </ul>
							    </div>
							{% endraw %}
							{% raw %}
								<button class="btn btn-default" type="submit" ng-click="showReviewToggle()" ng-model="add_cancel">{{add_cancel}}</button>
							{% endraw %}
				    			<div id="add-review" ng-show="showReviewOn()">
				    				<form name="reviewForm" method='post' ng-submit="addNewReview('{{restaurant.id}}')" novalidate>
					    				<h4>Submit a reivew: </h4>
				    					<fieldset class="form-group">
				    						<select ng-model="review.stars" ng-options="stars for stars in [5,4,3,2,1]" title="Stars" name="Stars" required>
					    						<option value="">Rate the Restaurant</option>
					    					</select>
					    				</fieldset>

					    				<fieldset class="form-group">
						    				<textarea ng-model="review.review" placeholder="Write a short review of the restaurant..." title="Body" name="Body" required></textarea>
		                				</fieldset>

		                				<!-- <fieldset class="form-group">
								            <input ng-model="review.reviewer_name" placeholder="jimmyDean@example.org" title="Author" name="Author" required />
							            </fieldset>
 -->
							            <fieldset class="form-group">
							                <input type="submit" class="btn btn-primary pull-right" value="Submit Review" ng-click="showReviewToggle()">
							            </fieldset>
						            </form>

						        </div>
					    	</div>

		    				<div ng-show="isSelected(3)" class="subdetails" id="{{restaurant.id}}">
		    				</div>
		    			</div>
					</div>
				</div>
			</div>
		</div>
		{% endfor %}
	</div>
</div>
<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.3.14/angular.min.js"></script>
<script src="../static/js/restaurant_app.js"></script>
</body>
</html>


